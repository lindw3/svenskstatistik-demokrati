col_types = c("numeric", "text", "text",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric"))
colnames(partisympati_kön_ålder) <- c("År" , "Kön" , "Ålder" , "Moderaterna" , "Centerpartiet" , "Liberalerna" ,
"Kristdemokraterna" , "Miljöpartiet" , "Socialdemokraterna" , "Vänsterpartiet" ,
"Sverigedemokraterna" , "Övriga partier")
df <- partisympati_kön_ålder %>%
filter(Ålder != "Totalt" ,
År == 2024 ,
Kön == "Båda") %>%
pivot_longer(!c(År, Kön, Ålder) , names_to = "Parti" , values_to = "Andel")
df
library(readxl)
förtroendevalda_kommun_ålder <- read_excel("data/förtroendevalda_kommun_ålder.xlsx")
View(förtroendevalda_kommun_ålder)
library(flexdashboard)
library(ggplot2)
library(stringr)
library(scales)
library(dplyr)
library(tidyr)
library(DT)
library(png)
library(data.table)
library(magrittr)
library(gridExtra)
library(openxlsx)
library(forcats)
library(patchwork)
library(ggthemes)
library(plotly)
library(ggridges)
library(forecast)
library(GGally)
library(cluster)
library(sf)
library(ggrepel)
library(ggtext)
library(flexdashboard)
library(ggplot2)
library(stringr)
library(scales)
library(dplyr)
library(tidyr)
library(DT)
library(png)
library(data.table)
library(magrittr)
library(gridExtra)
library(openxlsx)
library(forcats)
library(patchwork)
library(ggthemes)
library(plotly)
library(ggridges)
library(forecast)
library(GGally)
library(cluster)
library(sf)
library(ggrepel)
library(ggtext)
förtroendevalda_kommun_ålder %>%
pivot_longer(!c(Parti, Kön, Kategori, Mätvariabel) , names_to = År , values_to = Andel)
förtroendevalda_kommun_ålder %>%
pivot_longer(!c(Parti, Kön, Kategori, Mätvariabel) , names_to = "År" , values_to = "Andel")
förtroendevalda_kommun_ålder %>%
pivot_longer(!c(Parti, Kön, Kategori, Mätvariabel) , names_to = "År" , values_to = "Andel")
förtroendevalda_kommun_ålder <- förtroendevalda_kommun_ålder %>%
pivot_longer(!c(Parti, Kön, Kategori, Mätvariabel) , names_to = "År" , values_to = "Andel")
förtroendevalda_kommun_ålder <- förtroendevalda_kommun_ålder %>%
pivot_longer(!c(Parti, Kön, Kategori, Mätvariabel) , names_to = "År" , values_to = "Andel")
df <- förtroendevalda_kommun_ålder %>%
filter(Kategori == "Totalt" ,
Kön != "Båda" ,
Mätvariabel == "Könsfördelning" ,
År == "2023-2026") %>%
group_by(Parti, Kön) %>%
summarize(Andel = Andel)
View(df)
df <- förtroendevalda_kommun_ålder %>%
filter(Kategori == "Totalt" ,
Kön != "Båda" ,
Mätvariabel == "Könsfördelning" ,
År == "2023-2026" ,
Parti != "Totalt") %>%
group_by(Parti, Kön) %>%
summarize(Andel = Andel)
df <- förtroendevalda_kommun_ålder %>%
filter(Kategori == "Totalt" ,
Kön != "Båda" ,
Mätvariabel == "Könsfördelning" ,
År == "2023-2026" ,
Parti != "Totalt") %>%
group_by(Parti, Kön) %>%
summarize(Andel = Andel)
df %>%
ggplot(aes(y = Parti, x = Andel, fill = Kön,
text = paste(Parti, "\nKön: ", Kön, "\nAndel: ", Andel, "%"))) +
geom_col(position = "dodge") +
xlab("Andel, %") +
labs(fill = "Kön") +
ss_theme +
scale_fill_manual(values = c("Kvinnor" = "#ffb1b1",
"Män" = "#64b6ee"))
df <- förtroendevalda_kommun_ålder %>%
filter(Kategori == "Totalt" ,
Kön != "Båda" ,
Mätvariabel == "Könsfördelning" ,
År == "2023-2026") %>%
group_by(Parti, Kön) %>%
summarize(Andel = Andel)
df
df <- förtroendevalda_kommun_ålder %>%
filter(Kön != "Båda" ,
Mätvariabel == "Könsfördelning"
)
df <- förtroendevalda_kommun_ålder %>%
filter(Kön == "Män",
Mätvariabel == "Könsfördelning"
)
df_blå <- df %>%
filter(Parti %in% c("Moderaterna", "Liberalerna", "Kristdemokraterna", "Sverigedemokraterna")) %>%
group_by(År, Kategori) %>%
summarise(Blå = sum(Andel, na.rm = TRUE))
View(df_blå)
df <- förtroendevalda_kommun_ålder %>%
filter(Kön == "Män",
Mätvariabel == "Könsfördelning" ,
Kategori == "Totalt"
)
df <- förtroendevalda_kommun_ålder %>%
filter(Kön == "Män",
Mätvariabel == "Könsfördelning" ,
Kategori == "Totalt"
)
ggplot(aes(x = År , y = Andel , group = Parti , color = Parti,
text = paste(År, "\nParti: " , Parti, "\nAndel män: " , Andel , "%"))) +
geom_line(linewidth = 1) +
scale_y_continuous(limits = c(0.3, 0.7),
breaks = 0.5,
labels = scales::percent_format(accuracy = 1)) +
partifärger_colour +
ss_theme
df %>%
ggplot(aes(x = År , y = Andel , group = Parti , color = Parti,
text = paste(År, "\nParti: " , Parti, "\nAndel män: " , Andel , "%"))) +
geom_line(linewidth = 1) +
scale_y_continuous(limits = c(0.3, 0.7),
breaks = 0.5,
labels = scales::percent_format(accuracy = 1)) +
partifärger_colour +
ss_theme
df %>%
ggplot(aes(x = År , y = Andel , group = Parti , color = Parti,
text = paste(År, "\nParti: " , Parti, "\nAndel män: " , Andel , "%"))) +
geom_line(linewidth = 1) +
scale_y_continuous(limits = c(30 , 70),
breaks = 50,
labels = scales::percent_format(accuracy = 1)) +
partifärger_colour +
ss_theme
df %>%
ggplot(aes(x = År , y = Andel/100 , group = Parti , color = Parti,
text = paste(År, "\nParti: " , Parti, "\nAndel män: " , Andel*100 , "%"))) +
geom_line(linewidth = 1) +
scale_y_continuous(limits = c(0.3 , 0.7),
breaks = 0.5,
labels = scales::percent_format(accuracy = 1)) +
partifärger_colour +
ss_theme
df %>%
ggplot(aes(x = År , y = Andel/100 , group = Parti , color = Parti,
text = paste(År, "\nParti: " , Parti, "\nAndel män: " , Andel*100 , "%"))) +
geom_line(linewidth = 1) +
scale_y_continuous(limits = c(0.2 , 0.8),
breaks = 0.5,
labels = scales::percent_format(accuracy = 1)) +
partifärger_colour +
ss_theme
df <- förtroendevalda_kommun_ålder %>%
filter(Kön == "Män",
Mätvariabel == "Könsfördelning" ,
Kategori == "Totalt"
)
df %>%
ggplot(aes(x = År , y = Andel/100 , group = Parti , color = Parti,
text = paste(År, "\nParti: " , Parti, "\nAndel män: " , Andel*100 , "%"))) +
geom_line(linewidth = 1) +
scale_y_continuous(limits = c(0.2 , 0.8),
breaks = 0.5,
labels = scales::percent_format(accuracy = 1)) +
ylab("Andel, %") +
partifärger_colour +
ss_theme -> p_förtroendevalda_kön_år
ggplotly(p_förtroendevalda_kön_år, tooltip = "text") %>%
config(displayModeBar = F) %>%
layout(legend = list(x = 1.05, y = 0.5, xanchor = "left", yanchor = "middle")) %>%
add_annotations(
x = 0.5, xref = "paper",
y = 0.9, yref = "paper",
text = "Män",
showarrow = FALSE,
font = list(color = "#1e2791", size = 16 , family = "Arial Black")
) %>%
add_annotations(
x = 0.5, xref = "paper",
y = 0.1, yref = "paper",
text = "Kvinnor",
showarrow = FALSE,
font = list(color = "#b30000", size = 16 , family = "Arial Black")
)
df <- förtroendevalda_kommun_ålder %>%
filter(Kön == "Män",
Mätvariabel == "Könsfördelning" ,
Kategori == "Totalt"
)
df %>%
ggplot(aes(x = År , y = Andel/100 , group = Parti , color = Parti,
text = paste(År, "\nParti: " , Parti, "\nAndel män: " , Andel , "%"))) +
geom_line(linewidth = 1) +
scale_y_continuous(limits = c(0.2 , 0.8),
breaks = 0.5,
labels = scales::percent_format(accuracy = 1)) +
ylab("Andel, %") +
partifärger_colour +
ss_theme -> p_förtroendevalda_kön_år
ggplotly(p_förtroendevalda_kön_år, tooltip = "text") %>%
config(displayModeBar = F) %>%
layout(legend = list(x = 1.05, y = 0.5, xanchor = "left", yanchor = "middle")) %>%
add_annotations(
x = 0.5, xref = "paper",
y = 0.9, yref = "paper",
text = "Män",
showarrow = FALSE,
font = list(color = "#1e2791", size = 16 , family = "Arial Black")
) %>%
add_annotations(
x = 0.5, xref = "paper",
y = 0.1, yref = "paper",
text = "Kvinnor",
showarrow = FALSE,
font = list(color = "#b30000", size = 16 , family = "Arial Black")
)
df <- förtroendevalda_kommun_ålder %>%
filter(Kategori != "Totalt" ,
Kön == "Båda" ,
Mätvariabel == "Könsfördelning" ,
År == "2023-2026" ,
Parti != "Totalt") %>%
group_by(Parti, Kategori) %>%
summarize(Andel = Andel)
df <- förtroendevalda_kommun_ålder %>%
filter(Kategori != "Totalt" ,
Kön == "Båda" ,
Mätvariabel == "Förtroendevalda, andel" ,
År == "2023-2026" ,
Parti != "Totalt") %>%
group_by(Parti, Kategori) %>%
summarize(Andel = Andel)
df <- förtroendevalda_kommun_ålder %>%
filter(Kategori != "Totalt" ,
Kön == "Båda" ,
Mätvariabel == "Förtroendevalda, andel" ,
År == "2023-2026" ,
Parti != "Totalt") %>%
group_by(Parti, Kategori) %>%
summarize(Andel = Andel)
df %>%
ggplot(aes(y = Parti, x = Andel, fill = Kategori,
text = paste(Parti, "\nÅlder: ", Kategori, "\nAndel: ", Andel, "%"))) +
geom_col(position = "dodge") +
xlab("Andel, %") +
labs(fill = "Ålder") +
ss_theme +
scale_fill_manual(values = c("18-29" = "#ffb1b1",
"30-49" = "#64b6ee" ,
"50-64" = "#94c58c",
"65+" = "#ffff9a"))
df %>%
ggplot(aes(y = Parti, x = Andel, fill = Kategori,
text = paste(Parti, "\nÅlder: ", Kategori, "\nAndel: ", Andel, "%"))) +
geom_col(position = "dodge") +
xlab("Andel, %") +
labs(fill = "Ålder") +
ss_theme +
scale_fill_manual(values = c("18-29 år" = "#ffb1b1",
"30-49 år" = "#64b6ee" ,
"50-64 år" = "#94c58c",
"65+ år" = "#ffff9a"))
levels = c("65+ år" , "50-64 år" , "30-49 år" , "18-29 år")
df <- förtroendevalda_kommun_ålder %>%
filter(Kategori != "Totalt" ,
Kön == "Båda" ,
Mätvariabel == "Förtroendevalda, andel" ,
År == "2023-2026" ,
Parti != "Totalt") %>%
group_by(Parti, Kategori) %>%
summarize(Andel = Andel)
df %>%
ggplot(aes(y = factor(Parti , level = levels), x = Andel, fill = Kategori,
text = paste(Parti, "\nÅlder: ", Kategori, "\nAndel: ", Andel, "%"))) +
geom_col(position = "dodge") +
xlab("Andel, %") +
labs(fill = "Ålder") +
ss_theme +
scale_fill_manual(values = c("18-29 år" = "#ffb1b1",
"30-49 år" = "#64b6ee" ,
"50-64 år" = "#94c58c",
"65+ år" = "#ffff9a"))
df %>%
ggplot(aes(y = Parti, x = Andel, fill = factor(Kategori, level = levels),
text = paste(Parti, "\nÅlder: ", Kategori, "\nAndel: ", Andel, "%"))) +
geom_col(position = "dodge") +
xlab("Andel, %") +
labs(fill = "Ålder") +
ss_theme +
scale_fill_manual(values = c("18-29 år" = "#ffb1b1",
"30-49 år" = "#64b6ee" ,
"50-64 år" = "#94c58c",
"65+ år" = "#ffff9a"))
df %>%
ggplot(aes(y = Parti, x = Andel, fill = factor(Kategori, levels = levels),
text = paste(Parti, "\nÅlder: ", Kategori, "\nAndel: ", Andel, "%"))) +
geom_col(position = "dodge") +
xlab("Andel, %") +
labs(fill = "Ålder") +
ss_theme +
scale_fill_manual(values = c("18-29 år" = "#ffb1b1",
"30-49 år" = "#64b6ee" ,
"50-64 år" = "#94c58c",
"65+ år" = "#ffff9a"))
levels <- c("65+ år" , "50-64 år" , "30-49 år" , "18-29 år")
df <- förtroendevalda_kommun_ålder %>%
filter(Kategori != "Totalt" ,
Kön == "Båda" ,
Mätvariabel == "Förtroendevalda, andel" ,
År == "2023-2026" ,
Parti != "Totalt") %>%
group_by(Parti, Kategori) %>%
summarize(Andel = Andel)
df %>%
ggplot(aes(y = Parti, x = Andel, fill = factor(Kategori, levels = levels),
text = paste(Parti, "\nÅlder: ", Kategori, "\nAndel: ", Andel, "%"))) +
geom_col(position = "dodge") +
xlab("Andel, %") +
labs(fill = "Ålder") +
ss_theme +
scale_fill_manual(values = c("18-29 år" = "#ffb1b1",
"30-49 år" = "#64b6ee" ,
"50-64 år" = "#94c58c",
"65+ år" = "#ffff9a"))
df <- förtroendevalda_kommun_ålder %>%
filter(Kategori != "Totalt" ,
Kön == "Båda" ,
Mätvariabel == "Förtroendevalda, andel" ,
År == "2023-2026" ,
Parti != "Totalt") %>%
group_by(Parti, Kategori) %>%
summarize(Andel = Andel)
df$Kategori <- factor(df$Kategori, levels = levels)
df %>%
ggplot(aes(y = Parti, x = Andel, fill = factor(Kategori, levels = levels),
text = paste(Parti, "\nÅlder: ", Kategori, "\nAndel: ", Andel, "%"))) +
geom_col(position = "dodge") +
xlab("Andel, %") +
labs(fill = "Ålder") +
ss_theme +
scale_fill_manual(values = c("18-29 år" = "#ffb1b1",
"30-49 år" = "#64b6ee" ,
"50-64 år" = "#94c58c",
"65+ år" = "#ffff9a"))
df <- förtroendevalda_kommun_ålder %>%
filter(Kön == "Män",
Mätvariabel == "Könsfördelning" ,
Kategori != "Totalt" ,
Parti == "Totalt"
)
df %>%
ggplot(aes(x = År , y = Andel/100 , group = Kategori , color = Kategori,
text = paste(År, "\nÅlder: " , Kategori, "\nAndel män: " , Andel , "%"))) +
geom_line(linewidth = 1) +
scale_y_continuous(limits = c(0.3 , 0.7),
breaks = 0.5,
labels = scales::percent_format(accuracy = 1)) +
ylab("Andel, %") +
partifärger_colour +
ss_theme
df %>%
ggplot(aes(x = År , y = Andel/100 , group = Kategori , color = Kategori,
text = paste(År, "\nÅlder: " , Kategori, "\nAndel män: " , Andel , "%"))) +
geom_line(linewidth = 1) +
scale_y_continuous(limits = c(0.3 , 0.7),
breaks = 0.5,
labels = scales::percent_format(accuracy = 1)) +
ylab("Andel, %") +
scale_colour_manual(values = c("18-29 år" = "#ffb1b1",
"30-49 år" = "#64b6ee" ,
"50-64 år" = "#94c58c",
"65+ år" = "#ffff9a")) +
ss_theme
ggplotly(p_förtroendevalda_kön_ålder_år, tooltip = "text") %>%
config(displayModeBar = F) %>%
layout(legend = list(x = 1.05, y = 0.5, xanchor = "left", yanchor = "middle")) %>%
add_annotations(
x = 0.5, xref = "paper",
y = 0.9, yref = "paper",
text = "Män",
showarrow = FALSE,
font = list(color = "#1e2791", size = 16 , family = "Arial Black")
) %>%
add_annotations(
x = 0.5, xref = "paper",
y = 0.1, yref = "paper",
text = "Kvinnor",
showarrow = FALSE,
font = list(color = "#b30000", size = 16 , family = "Arial Black")
)
df %>%
ggplot(aes(x = År , y = Andel/100 , group = Kategori , color = Kategori,
text = paste(År, "\nÅlder: " , Kategori, "\nAndel män: " , Andel , "%"))) +
geom_line(linewidth = 1) +
scale_y_continuous(limits = c(0.3 , 0.7),
breaks = 0.5,
labels = scales::percent_format(accuracy = 1)) +
ylab("Andel, %") +
scale_colour_manual(values = c("18-29 år" = "#ffb1b1",
"30-49 år" = "#64b6ee" ,
"50-64 år" = "#94c58c",
"65+ år" = "#ffff9a")) +
ss_theme -> p_förtroendevalda_kön_ålder_år
ggplotly(p_förtroendevalda_kön_ålder_år, tooltip = "text") %>%
config(displayModeBar = F) %>%
layout(legend = list(x = 1.05, y = 0.5, xanchor = "left", yanchor = "middle")) %>%
add_annotations(
x = 0.5, xref = "paper",
y = 0.9, yref = "paper",
text = "Män",
showarrow = FALSE,
font = list(color = "#1e2791", size = 16 , family = "Arial Black")
) %>%
add_annotations(
x = 0.5, xref = "paper",
y = 0.1, yref = "paper",
text = "Kvinnor",
showarrow = FALSE,
font = list(color = "#b30000", size = 16 , family = "Arial Black")
)
library(readxl)
förtroendevalda_kommun_utbildning <- read_excel("data/förtroendevalda_kommun_utbildning.xlsx")
View(förtroendevalda_kommun_utbildning)
förtroendevalda_kommun_utbildning
förtroendevalda_kommun_utbildning <- förtroendevalda_kommun_utbildning %>%
pivot_longer(!c(Parti, Kön, Utbildning, Mätvariabel) , names_to = "År" , values_to = "Andel")
library(flexdashboard)
library(ggplot2)
library(stringr)
library(scales)
library(dplyr)
library(tidyr)
library(DT)
library(png)
library(data.table)
library(magrittr)
library(gridExtra)
library(openxlsx)
library(forcats)
library(patchwork)
library(ggthemes)
library(plotly)
library(ggridges)
library(forecast)
library(GGally)
library(cluster)
library(sf)
library(ggrepel)
library(ggtext)
df %>%
ggplot(aes(x = År , y = Andel/100 , group = Parti , color = Parti,
text = paste(År, "\nParti: " , Parti, "\nAndel män: " , Andel , "%"))) +
geom_line(linewidth = 1) +
scale_y_continuous(limits = c(0 , 1),
breaks = 0.5,
labels = scales::percent_format(accuracy = 1)) +
ylab("Andel, %") +
partifärger_colour +
ss_theme
df <- förtroendevalda_kommun_ålder %>%
filter(Kön == "Män",
Mätvariabel == "Könsfördelning" ,
Kategori == "Totalt"
)
df %>%
ggplot(aes(x = År , y = Andel/100 , group = Parti , color = Parti,
text = paste(År, "\nParti: " , Parti, "\nAndel män: " , Andel , "%"))) +
geom_line(linewidth = 1) +
scale_y_continuous(limits = c(0 , 1),
breaks = 0.5,
labels = scales::percent_format(accuracy = 1)) +
ylab("Andel, %") +
partifärger_colour +
ss_theme
df %>%
ggplot(aes(x = År , y = Andel/100 , group = Parti , color = Parti,
text = paste(År, "\nParti: " , Parti, "\nAndel män: " , Andel , "%"))) +
geom_line(linewidth = 1) +
scale_y_continuous(limits = c(0 , 1),
breaks = c(0 , 0.5 , 1),
labels = scales::percent_format(accuracy = 1)) +
ylab("Andel, %") +
partifärger_colour +
ss_theme
